#!/usr/bin/with-contenv bashio
# ==============================================================================
# JPD Hass.io Add-ons: forked-daapd server
# Runs the forked-daapd Server
# ==============================================================================
declare -a options

# Wait for avahi-daemon to become available
s6-svwait -u -t 5000 /var/run/s6/services/avahi-daemon

bashio::log.info 'Starting the forked-daapd Server...'

options+=(-f)
options+=(-c /config/forked-daapd/forked-daapd.conf)
options+=(-P /var/run/forked-daapd.pid)

# Run forked-daapd
exec /usr/local/sbin/forked-daapd "${options[@]}"
